<html>
    <head>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
        <link href='https://fonts.googleapis.com/css?family=Roboto:500,300' rel='stylesheet' type='text/css'>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
        <script src="skycons.js"></script>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <style>
            body {
                font-family: "Roboto";
                padding: 5%;
                background-color: #000;
                color: #fff;
                font-weight: 500;
                font-size: 72px;
            }
            p {
                margin: 5px;
            }
            .today {
                text-align: right;
            }
            #time {
                font-size: 112px;
            }
            .thin, #date, #highlow {
                font-weight: 300;
                color: #BBB;
            }

        </style>

        <script>
            $( document ).ready(function() {
                var apiKey = '924e9d9107d45f7ecb44b283db5bc86b';
                var url = 'https://api.forecast.io/forecast/';
                var lat = 37.7608960;
                var lon = -122.4380300;
                var data;

                var skycons = new Skycons({"color": "white"});

                setInterval(function(){
                    var date = moment().format('dddd, MMM Do')
                    var time = moment().format('H:mm')
                    $('#date').html(date);
                    $('#time').html(time);
                }, 1000);

                function forecast(){
                    $.getJSON(url + apiKey + "/" + lat + "," + lon + "?callback=?", function(data) {
                      console.log(data);

                        $('#temp').html(Math.round(data.currently.temperature) + '&deg;F ' + '<span class="thin">' + data.currently.summary.toLowerCase() + '</span>');
                        $('#highlow').html(Math.round(data.daily.data[0].temperatureMax) + '&deg;F' + '/' + Math.round(data.daily.data[0].temperatureMin) + '&deg;F')
                        skycons.add(document.getElementById("icon"), data.daily.data[0].icon);
                        skycons.play();
                    });
                    setTimeout(forecast, 120000)
                }
                forecast();

            });
        </script>

    </head>

    <body>

        <div class="today">

            <p id="date"></p>
            <p id="time"></p>
            <p id="temp"></p>
            <p id="highlow"></p>
            <canvas id="icon" width="128" height="128"></canvas>
        </div>


    </body>
</html>